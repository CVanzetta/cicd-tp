{
  "dashboard": {
    "title": "Test Metrics Dashboard",
    "tags": ["tests", "ci-cd", "prometheus"],
    "timezone": "browser",
    "refresh": "5s",
    "schemaVersion": 38,
    "panels": [
      {
        "id": 1,
        "title": "üìä Total Tests",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 0, "y": 0 },
        "targets": [
          {
            "expr": "tests_total",
            "refId": "A"
          }
        ],
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "textMode": "value_and_name"
        },
        "fieldConfig": {
          "defaults": {
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null },
                { "color": "yellow", "value": 30 },
                { "color": "red", "value": 10 }
              ]
            }
          }
        }
      },
      {
        "id": 2,
        "title": "‚úÖ Tests Passed",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 6, "y": 0 },
        "targets": [
          {
            "expr": "tests_passed",
            "refId": "A"
          }
        ],
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "textMode": "value_and_name"
        },
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "fixed", "fixedColor": "green" },
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null }
              ]
            }
          }
        }
      },
      {
        "id": 3,
        "title": "‚ùå Tests Failed",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 12, "y": 0 },
        "targets": [
          {
            "expr": "tests_failed",
            "refId": "A"
          }
        ],
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "textMode": "value_and_name"
        },
        "fieldConfig": {
          "defaults": {
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null },
                { "color": "orange", "value": 1 },
                { "color": "red", "value": 5 }
              ]
            }
          }
        }
      },
      {
        "id": 4,
        "title": "‚è≠Ô∏è Tests Skipped",
        "type": "stat",
        "gridPos": { "h": 6, "w": 6, "x": 18, "y": 0 },
        "targets": [
          {
            "expr": "tests_skipped",
            "refId": "A"
          }
        ],
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "textMode": "value_and_name"
        },
        "fieldConfig": {
          "defaults": {
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null },
                { "color": "orange", "value": 1 }
              ]
            }
          }
        }
      },
      {
        "id": 5,
        "title": "‚è±Ô∏è Average Test Duration",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 24, "x": 0, "y": 6 },
        "targets": [
          {
            "expr": "tests_avg_duration_ms",
            "refId": "A",
            "legendFormat": "Duration (ms)"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "ms",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null },
                { "color": "yellow", "value": 130 },
                { "color": "red", "value": 150 }
              ]
            },
            "custom": {
              "lineWidth": 2,
              "fillOpacity": 10,
              "showPoints": "auto",
              "spanNulls": false
            }
          }
        },
        "options": {
          "legend": {
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true,
            "calcs": ["lastNotNull", "min", "max", "mean"]
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        }
      },
      {
        "id": 6,
        "title": "üìà Success Rate",
        "type": "gauge",
        "gridPos": { "h": 8, "w": 8, "x": 0, "y": 14 },
        "targets": [
          {
            "expr": "(tests_passed / tests_total) * 100",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "percent",
            "min": 0,
            "max": 100,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "red", "value": null },
                { "color": "yellow", "value": 70 },
                { "color": "green", "value": 90 }
              ]
            }
          }
        },
        "options": {
          "showThresholdLabels": true,
          "showThresholdMarkers": true
        }
      },
      {
        "id": 7,
        "title": "ü•ß Test Distribution",
        "type": "piechart",
        "gridPos": { "h": 8, "w": 8, "x": 8, "y": 14 },
        "targets": [
          {
            "expr": "tests_passed",
            "refId": "A",
            "legendFormat": "Passed"
          },
          {
            "expr": "tests_failed",
            "refId": "B",
            "legendFormat": "Failed"
          },
          {
            "expr": "tests_skipped",
            "refId": "C",
            "legendFormat": "Skipped"
          }
        ],
        "options": {
          "legend": {
            "displayMode": "table",
            "placement": "right",
            "showLegend": true,
            "values": ["value", "percent"]
          },
          "pieType": "donut"
        }
      },
      {
        "id": 8,
        "title": "üö® Active Alerts",
        "type": "alertlist",
        "gridPos": { "h": 8, "w": 8, "x": 16, "y": 14 },
        "options": {
          "showOptions": "current",
          "stateFilter": { "firing": true, "pending": true, "inactive": false },
          "alertName": "",
          "dashboardAlerts": false,
          "alertInstanceLabelFilter": "",
          "folder": ""
        }
      }
    ]
  },
  "overwrite": true
}
